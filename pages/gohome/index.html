<div>
  <div class="container">
    <World ref="world" class="world" />
    <div class="turn-box">
      <div
        class="turn-which"
        :class="{
          'turn-active': turn.active.pekora,
          'turn-inactive': !turn.active.pekora,
        }"
      >
        <p class="turn-which-player">うさぎさんのターン</p>
        <p class="turn-which-word">
          [{{ getBaseWord('ぺこら').word }}]
        </p>
      </div>
      <div class="turn-info">
        <p class="turn-count">ターン数:&nbsp;{{ turn.count }}</p>
        <p class="turn-countdown">
          のこり:&nbsp;
          <span :class="{'danger': turn.timeLimit <= 5}">{{ turn.timeLimit }}</span>
        </p>
      </div>
      <div
        class="turn-which"
        :class="{
          'turn-active': turn.active.baikinKun,
          'turn-inactive': !turn.active.baikinKun,
        }"
      >
        <p class="turn-which-player">ばいきんくんのターン</p>
        <p class="turn-which-word">
          [{{ getBaseWord('ばいきんくん').word }}]
        </p>
      </div>
    </div>
    <div class="word-wrapper">
      <div v-for="word in words" :key="word.index" class="word">
        <Button
          :topLeft="word.direction.top_left"
          :topRight="word.direction.top_right"
          :bottomLeft="word.direction.bottom_left"
          :bottomRight="word.direction.bottom_right"
          @click.native="openWordModal(word)"
        >
          <template v-slot:text>
            <span>
              {{ word.word }}
              <Sonar
                :topLeft="word.direction.top_left"
                :topRight="word.direction.top_right"
                :bottomLeft="word.direction.bottom_left"
                :bottomRight="word.direction.bottom_right"
              />
            </span>
          </template>
        </Button>
      </div>
    </div>
    <Modal ref="wordModal">
      <template v-slot:content>
        <p>『{{ selectedWord.word }}』でよろしいですか？</p>
      </template>
      <template v-slot:btns>
        <Button @click.native="closeWordModal">
          <template v-slot:text>
            <span>よくない</span>
          </template>
        </Button>
        <Button @click.native="stepAfterSecondTurn(selectedWord)">
          <template v-slot:text>
            <span>よい</span>
          </template>
        </Button>
      </template>
    </Modal>
  </div>
  <div class="btn-pause">
    <Button size="small" @click.native="openPauseModal">
      <template v-slot:text>
        <span>ポーズ</span>
      </template>
    </Button>
  </div>
  <Modal ref="pauseModal" :is-wrap="true">
    <template v-slot:content>
      <p>ポーズ</p>
    </template>
    <template v-slot:btns>
      <div class="pause-choices">
        <Button @click.native="restartGame">
          <template v-slot:text>
            <span>さいかい</span>
          </template>
        </Button>
      </div>
      <div class="pause-choices">
        <Button @click.native="refreshGame">
          <template v-slot:text>
            <span>やりなおし</span>
          </template>
        </Button>
      </div>
      <div class="pause-choices">
        <Button to="/">
          <template v-slot:text>
            <span>やめる</span>
          </template>
        </Button>
      </div>
    </template>
  </Modal>
  <TurnAnimation
    ref="turnAnimation"
    :count="turn.count"
    pekora="うさぎさん"
    baikin-kun="ばいきんくん"
  />
  <Modal ref="winModal" :show-always="true">
    <template v-slot:content>
      <p>『{{ winner }}』のかち！</p>
    </template>
    <template v-slot:btns>
      <Button to="/" size="large">
        <template v-slot:text>
          <span>おつかれ</span>
        </template>
      </Button>
    </template>
  </Modal>
  <Modal ref="forceSelectWordModal" :not-click-self="true">
    <template v-slot:content>
      <p>持ち時間が過ぎたため 『{{ selectedWord.word }}』を選択しました</p>
    </template>
  </Modal>
</div>
