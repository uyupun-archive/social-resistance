<div class="container">
  <div v-if="user && avatars">
    <form @submit.prevent="onSubmit">
      <div class="user-icon__area">
        <img :src="makeFullImagePath(selectedAvatar.image)" alt="user icon" class="user-icon" />
        <div class="user-icon__filter" @click="onClick()">
          <Fa icon="sync" class="sync-icon" area-hidden="true" />
        </div>
      </div>
      <div class="info">
        <div class="info-item">
          <div class="info-label">ユーザーID</div>
          <div class="info-data">{{ userId }}</div>
        </div>
        <div class="info-item">
          <div class="info-label">
            レート
            <nuxt-link to="/rank" class="question-link">
              <Fa :icon="['far', 'question-circle']" class="question-icon" area-hidden="true" />
            </nuxt-link>
          </div>
          <div class="info-data">
            <img :src="makeFullImagePath(user.rank)" alt="rate icon" class="rate-icon" />
            {{ user.rate }}
          </div>
        </div>
        <div class="info-item">
          <div class="info-label">戦績</div>
          <div class="info-data">{{ makeBattleHistory() }}</div>
        </div>
      </div>
      <p v-if="errorMsg" class="error-message">{{ errorMsg }}</p>
      <div class="btn-area">
        <Button :to="`/profile/${userId}`" size="middle">
          <template v-slot:text>
            <span>やめる</span>
          </template>
        </Button>
        <Button size="middle" type="submit" :disabled="canSave()">
          <template v-slot:text>
            <span>ほぞん</span>
          </template>
        </Button>
      </div>
    </form>
    <Modal ref="avatarsModal" :isClickSelf="true">
      <template v-slot:content>
        <div class="user-icon__content">
          <div class="user-icon__select">
            <Fa icon="caret-left" class="caret-icon" area-hidden="true" @click="prev()" />
            <div class="user-icon__area">
              <img :src="makeFullImagePath(currentAvatar.image)" alt="user icon" class="user-icon" />
            </div>
            <Fa icon="caret-right" class="caret-icon" area-hidden="true" @click="next()" />
          </div>
          <div class="user-icon__name">
            <Fa v-if="selectedAvatar.id === currentAvatar.id" :icon="['far', 'check-circle']" class="check-icon" area-hidden="true" />
            {{avatars[avatarIndex].name}}
          </div>
          <Button size="small" :disabled="selectedAvatar.id === currentAvatar.id" @click.native="selectAvatar()">
            <template v-slot:text>
              <span>けってい</span>
            </template>
          </Button>
        </div>
      </template>
    </Modal>
  </div>
</div>
